@model Playlistofy.Models.ViewModel.HomePageViewModel

@{
    ViewData["Title"] = "Home Page";
}
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

</head>

@section scripts {

    <script type="text/javascript">var $item = $('.carousel-item');
        var $wHeight = $(window).height();
        $item.eq(0).addClass('active');
        $item.height($wHeight);
        $item.addClass('full-screen');
        $('.carousel img').each(function () {
            var $src = $(this).attr('src');
            var $color = $(this).attr('data-color');
            $(this).parent().css({
                'background-image': 'url(' + $src + ')',
                'background-color': $color
            });
            $(this).remove();
        });
        $(window).on('resize', function () {
            $wHeight = $(window).height();
            $item.height($wHeight);
        });
        $('.carousel').carousel({
            interval: 600000,
            pause: "false"
        });</script>
}

<body style="background: url('https://cdn.pixabay.com/photo/2014/05/03/01/02/stage-336695_1280.jpg') no-repeat center center fixed !important; background-size: cover !important; height: 100% !important; width: 100% !important; min-height: 100% !important; min-width: 100% !important">
    <div class="banner" style="background: url('https://cdn.pixabay.com/photo/2014/04/04/14/56/background-313415_1280.jpg')">
        <h2 class="playlistofyTitle">♫♫  Playlistofy  ♫♫</h2>
        <h5 class="b" style="color:antiquewhite">
            Playlistofy is a revolutionizing idea that brings Spotify users together together into a new platform with
            features unlike the one's that are offered by Spotify! Ever wish you could tag your playlists and showcase them
            to the world? Or ever wish you could quickly search the leading and most popular playlist? You've come to the right
            spot! With Playlistofy, you will be able to do this and much more! Bring all your favorite playlists together
            in once place!
        </h5>
    </div>

    <div>

        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" style="height: 350px; background: url('https://cdn.pixabay.com/photo/2015/11/04/20/59/milky-way-1023340__480.jpg')">
            <!-- Indicators -->
            <!--<ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>-->
            @*<li data-target="#carouselExampleIndicators" data-slide-to="2"></li>*@
            <!--</ol>-->
            <!-- Wrapper for slides -->
            <div class="carousel-inner">
                <div class="carousel-item" style="padding-left: 100px; padding-right: 100px">
                    @*First Part*@
                    <div class="row w-100 container">
                        <div class="col">
                            <div class="card p-2 m-0  rounded-pill shadow-lg">
                                <form asp-action="Index">
                                    <div class="row">
                                        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                                        <div class="input-group w-100 h-100">
                                            <h5 style="padding-left: 25px; padding-top: 5px; width: 16%">Playlist Name: </h5>
                                            <input asp-for="SearchingPlaylistParameter" autocomplete="off" class="form-control" placeholder="Search For Playlist Names In Our Expansive Database..." />
                                            <button type="submit" id="submit" class="btn rounded btn-outline-primary mr-3" data-toggle="tooltip" title="search" style="height:38px !important">Search</button>
                                        </div>
                                        <div style="padding-left: 40%"><span asp-validation-for="SearchingPlaylistParameter" class="text-danger"></span></div>
                                    </div>
                                </form>
                            </div>
                            <div style="background-color: whitesmoke">
                                <table class="table table-bordered table-striped table-sm">
                                    @if (Model.SearchedPlaylists != null)
                                    {
                                        var count = 0;
                                        @foreach (var playlist in Model.SearchedPlaylists)
                                        {
                                            if (playlist == null)
                                            {
                                                <tr>
                                                    <td>
                                                        <h4>No Results Available - Try Again</h4>
                                                    </td>
                                                </tr>
                                            }
                                            if (count > 4)
                                            {
                                                break;
                                            }
                                            <tr>
                                                <td style="width: 300px !important">
                                                    @{
                                                        var listUser = Model.SearchedPlaylistsUsers.ElementAt(count);
                                                        if (listUser.Length > 25)
                                                        {
                                                            <p>@listUser.Substring(0, 25)...</p>
                                                        }
                                                        else
                                                        {
                                                            <p>@listUser</p>
                                                        }
                                                    }
                                                </td>
                                                <td>
                                                    <center>
                                                        <a asp-controller="Playlists" asp-action="DetailsFromSearch" asp-route-id="@playlist.Id">
                                                            @playlist.Name
                                                        </a>
                                                    </center>
                                                </td>
                                                <td>
                                                    <center>
                                                        10
                                                    </center>
                                                </td>
                                            </tr>
                                            ++count;
                                        }
                                    }
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carousel-item" style="padding-left: 100px; padding-right: 100px">
                    @*Third Part*@
                    <div class="row w-100 container">
                        <div class="col">
                            <div class="card p-2 m-0  rounded-pill shadow-lg">
                                <form asp-controller="Search" asp-action="Search" method="get">
                                    <div class="row">
                                        <div class="input-group w-100 h-100">
                                            <select name="searchType" id="searchType" class="custom-select border-0 ml-3">
                                                <option value="Playlist" selected>Playlist</option>
                                                <option value="Artist">Artist</option>
                                                <option value="Track">Track</option>
                                                <option value="Album">Album</option>
                                                <option value="Tags">Tags</option>
                                            </select>
                                            <input type="text" name="searchQuery" id="searchQuery" class="form-control" placeholder="Search..." pattern=".{2,}" required title="2 characters minimum" />
                                            <input type="hidden" id="itemId" name="itemId" />
                                            <button type="submit" id="submit" class="btn rounded btn-outline-primary mr-3" data-toggle="tooltip" title="search">Search</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                @*<div class="carousel-item">
                        <img class="d-block w-100" src="https://images.unsplash.com/photo-1419064642531-e575728395f2?ixlib=rb-0.3.5&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400&fit=max&ixid=eyJhcHBfaWQiOjE0NTg5fQ&s=76d5c793e4f8d02d7a9be27bc71256f7" data-color="violet" alt="Third Image">
                        <div class="carousel-caption d-md-block">
                            <h5>Third Image</h5>
                        </div>
                    </div>*@
                <!-- Controls -->

            </div>
            <div style="padding-bottom: 50px">
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>

        @*Second Part*@
        <div class="card mt-5 shadow-sm bg-white">
            <h4 class="card-title text-center">
                Most Recently Created Playlists
            </h4>
            <table class="table table-striped table-hover table-light" width="75%">
                <tr>
                    <td>User Name</td>
                    <td class="text-center">Playlist Name</td>
                    <td class="text-right">Number of Tracks</td>
                </tr>
                @if (Model.RecentPlaylists != null)
                {
                    @foreach (var playlist in Model.RecentPlaylists)
                    {
                        <tr>
                            <td>
                                <a asp-controller="Playlists" asp-action="DetailsFromSearch" asp-route-id="@playlist.Id">
                                    @playlist.Id
                                </a>
                            </td>
                            <td>
                                @playlist.Name
                            </td>
                            <td class="text-right">@playlist.PlaylistTrackMaps.Count</td>
                        </tr>
                    }
                }
            </table>
        </div>

        @*Fourth Part*@
        <div class="card mt-5 shadow-sm bg-white">
            <h4 class="card-title text-center">
                My Playlists
            </h4>
            @if (Model.UserID != null)
            {
                <div class="text-right">
                    <a asp-action="WebPlayer">View and Listen to all Playlists</a>
                </div>
                <table class="table table-striped table-hover table-light" width="75%">
                    <tr>
                        <td>Playlist Name</td>
                        <td class="text-center">Number of Tracks</td>
                        <td class="text-center">Description</td>
                        <td class="text-right">Listen Now!</td>
                    </tr>
                    @if (Model.UserPlaylists != null)
                    {
                        @foreach (var p in Model.UserPlaylists)
                        {
                            <tr>
                                <td><a asp-controller="Playlists" asp-action="DetailsFromSearch" asp-route-id="@p.Id">@p.Name</a></td>
                                <td class="text-center">@p.PlaylistTrackMaps.Count</td>
                                <td>@p.Description</td>
                                <td><a type="button" class="btn rounded btn-outline-primary mr-3 float-right" title="goto" asp-controller="Playlists" asp-action="DetailsFromSearch" asp-route-id="@p.Id">Listen to Playlist</a></td>
                            </tr>
                        }
                    }
                </table>
            }
            else
            {
                <center>
                    <h4 style="color:red">Access To This Feature Is Disabled - Register Account or Login</h4>
                </center>
            }
        </div>
    </div>
    <br><br><br><br>
</body>


@*@using Microsoft.EntityFrameworkCore
    @model IEnumerable<Playlist>

    @{
        ViewData["Title"] = "Home Page";
    }

    <div class="banner">
        <h1 class="b">Playlistofy</h1>
        <h3 class="b">Bring all your favorite playlists together in once place so that you can jam out endlessly!</h3>
    </div>

<div class="centered">
    <p>Search for a Playlist, Artist, Album, or Track by Title or Name</p>
</div>
<div class="row w-100 container">
<div class="col">
    <div class="card p-2 m-0  rounded-pill shadow-lg">
        <form asp-controller="Search" asp-action="Search" method="get">
            <div class="row">
                <div class="input-group w-100 h-100">
                    <select name="searchType" id="searchType" class="custom-select border-0 ml-3">
                        <option value="Playlist" selected>Playlist</option>
                        <option value="Artist">Artist</option>
                        <option value="Track">Track</option>
                        <option value="Album">Album</option>
                        <option value="Tags">Tags</option>
                    </select>
                    <input type="text" name="searchQuery" id="searchQuery" class="form-control" placeholder="Search..." pattern=".{2,}"   required title="2 characters minimum" />
                    <input type="hidden" id="itemId" name="itemId" />
                    <button type="submit" id="submit" class="btn rounded btn-outline-primary mr-3" data-toggle="tooltip" title="search">Search</button>
                </div>
            </div>
        </form>
    </div>
</div>
</div>

    <div class="card mt-5 shadow-sm bg-transparent">
        <h4 class="card-title text-center">
            My Playlists
        </h4>
        <div class="text-right">
            <a asp-action="WebPlayer">View and Listen to all Playlists</a>
        </div>
        <table class="table table-striped table-hover table-light" width="75%">
            <tr>
                <td>Playlist Name</td>
                <td class="text-center">Number of Tracks</td>
                <td class="text-center">Description</td>
                <td class="text-right">Listen Now!</td>
            </tr>
            @foreach (var p in Model)
            {
                <tr>
                    <td><a asp-controller="Playlists" asp-action="DetailsFromSearch" asp-route-id="@p.Id">@p.Name</a></td>
                    <td class="text-center">@p.PlaylistTrackMaps.Count</td>
                    <td>@p.Description</td>
                    <td><a type="button" class="btn rounded btn-outline-primary mr-3 float-right" title="goto" asp-controller="Playlists" asp-action="DetailsFromSearch" asp-route-id="@p.Id">Listen to Playlist</a></td>
                </tr>
            }
        </table>
    </div>*@